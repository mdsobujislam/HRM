@model IEnumerable<HRM.Models.LoanInstallment>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <div class="row justify-content-center mb-3">
        <div class="col-md-4">
            <input type="number" id="searchEmpId" class="form-control" placeholder="Enter Employee ID" />
        </div>
        <div class="col-md-2">
            <button type="button" class="btn btn-primary w-100" onclick="searchEmployee()">Search</button>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-md-12">
        <div class="card shadow">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Loan Installment List</h5>
            </div>
            <div class="card-body">
                <div class="container my-3">
                    <div class="row align-items-center g-3">
                        <!-- Installment From -->
                        <div class="col-md-2">
                            <label for="installmentFrom" class="form-label">Installment From</label>
                            <input type="text" id="installmentFrom" class="form-control" readonly>
                        </div>

                        <!-- Installment To -->
                        <div class="col-md-2">
                            <label for="installmentTo" class="form-label">Installment To</label>
                            <input type="text" id="installmentTo" class="form-control">
                        </div>

                        <!-- Net Amount -->
                        <div class="col-md-2">
                            <label for="netAmount" class="form-label">Net Amount</label>
                            <input type="text" id="netAmount" class="form-control" disabled>
                        </div>

                        <!-- Date of Payment -->
                        <div class="col-md-3">
                            <label for="dateOfPayment" class="form-label">Date of Payment</label>
                            <div class="input-group">
                                <input type="date" id="dateOfPayment" class="form-control" placeholder="dd/MM/yyyy">
                                @* <input type="date" name="FromDate" class="form-control"
                                       value="@DateTime.Today.ToString("MM/dd/yyyy")" /> *@
                            </div>
                        </div>

                        <!-- Pay Button -->
                        <div class="col-md-2 d-grid">
                            <button type="button" id="btnPay" class="btn btn-primary">Pay</button>
                        </div>
                    </div>
                    <hr class="mt-3" />
                </div>

            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="card shadow">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Loan Installment List</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table  datanew">
                        <thead class="table-primary">
                            <tr>
                                <th>SL No.</th>
                                <th>Loan ID</th>
                                <th>Inst No	</th>
                                <th>Inst Date</th>
                                <th>Inst Amount</th>
                                <th>Status</th>
                                <th>Payment Date</th>
                                <th>Installment Details</th>
                                <th>Salary Month</th>
                                <th>Salary Year</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                int index = 0;
                                foreach (var item in Model)
                                {
                                    index++;
                                    <tr>
                                        <td>@index</td>
                                        <td>@item.LoanId</td>
                                        <td>@item.Installment_No</td>
                                        <td>@item.DateOfInstallment</td>
                                        <td>@item.Installment_Amount</td>
                                        <td>@item.InstallmentStatus</td>
                                        <td>@item.PaymentDate</td>
                                        <td>@item.PaymentDate</td>
                                        <td>@item.SalaryMonth</td>
                                        <td>@item.SalaryYear</td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function searchEmployee() {
        var empId = document.getElementById("searchEmpId").value;
        if (empId) {
            // Redirect to Index action with empId
            window.location.href = '/LoanInstallment/Index?empId=' + empId;
        } else {
            alert("Please enter an Employee ID");
        }
    }
</script>