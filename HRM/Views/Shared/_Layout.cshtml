@using System.Security.Claims
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="shortcut icon" type="image/x-icon" href="~/favicon.ico" />

    <link rel="stylesheet" href="~/assets/plugins/select2/css/select2.min.css">

    <link rel="stylesheet" href="~/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/assets/css/animate.css" />
    <link rel="stylesheet" href="~/assets/css/dataTables.bootstrap4.min.css" />
    <link rel="stylesheet" href="~/assets/plugins/fontawesome/css/fontawesome.min.css" />
    <link rel="stylesheet" href="~/assets/plugins/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="~/assets/css/style.css" />
    <link rel="stylesheet" href="~/dist/themes/default/style.min.css" />
    <link href="~/css/toastr.min.css" rel="stylesheet" />

    <style>
        /* Shrink entire popup */
        .flatpickr-calendar {
            font-size: 12px !important;
            max-width: 220px !important;
        }

        /* Shrink day cells */
        .flatpickr-day,
        .flatpickr-weekday {
            padding: 4px !important;
            width: 28px !important;
            height: 28px !important;
            line-height: 28px !important;
        }

        /* Fix month and year container */
        .flatpickr-months {
            font-size: 13px !important;
        }

        /* Month navigation: arrows + text */
        .flatpickr-month {
            height: 28px !important;
            line-height: 28px !important;
        }

        /* Year input */
        .flatpickr-current-month input.cur-year {
            font-size: 12px !important;
            height: 24px !important;
            width: 50px !important;
        }

        /* Month name dropdown */
        .flatpickr-current-month .flatpickr-monthDropdown-months {
            font-size: 12px !important;
            height: 24px !important;
        }

        /* Optional: Time picker if enabled */
        .flatpickr-time {
            font-size: 12px !important;
        }
    </style>
</head>

<body>
    @* <div id="global-loader"> *@
    @*     <div class="whirly-loader"></div> *@
    @* </div> *@

    <div class="main-wrapper">
        <div class="header">
            <div class="header-left active">
                <a asp-controller="Home" asp-action="Dashboard" class="logo">
                    @* <img id="logoPreview"
                         src="@(!string.IsNullOrEmpty(Model.ExistingLogoPath) ? Url.Content(Model.ExistingLogoPath) : "")"
                         alt="Current Logo"
                         width="150"
                         style="display:@(string.IsNullOrEmpty(Model.ExistingLogoPath) ? "none" : "block");  padding:5px;" /> *@

                    <img src="~/assets/img/logonew.png" alt="" />
                </a>
                <a asp-controller="Home" asp-action="Dashboard" class="logo-small">
                    @* <img id="logoPreview"
                         src="@(!string.IsNullOrEmpty(Model.ExistingLogoPath) ? Url.Content(Model.ExistingLogoPath) : "")"
                         alt="Current Logo"
                         width="150"
                         style="display:@(string.IsNullOrEmpty(Model.ExistingLogoPath) ? "none" : "block");  padding:5px;" /> *@
                    <img src="~/assets/img/logo-small.png" alt="" />
                </a>
                <a id="toggle_btn" href="javascript:void(0);"> </a>
            </div>

            <a id="mobile_btn" class="mobile_btn" href="#sidebar">
                <span class="bar-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </span>
            </a>

            <ul class="nav user-menu">
                <li class="nav-item dropdown">
                    <a href="javascript:void(0);" class="dropdown-toggle nav-link" data-bs-toggle="dropdown">
                        <img src="~/assets/img/icons/notification-bing.svg" alt="img" />
                        <span class="badge rounded-pill">1</span>
                    </a>
                    <div class="dropdown-menu notifications">
                        <div class="topnav-dropdown-header">
                            <span class="notification-title">Notifications</span>
                            <a href="javascript:void(0)" class="clear-noti"> Clear All </a>
                        </div>
                        <div class="noti-content">
                            <ul class="notification-list">

                                <li class="notification-message" style="display:none">
                                    <a href="#">
                                        <div class="media d-flex">
                                            <span class="avatar flex-shrink-0">
                                                <i data-feather="user" class="user-icon"></i>
                                            </span>
                                            <div class="media-body flex-grow-1">
                                                <p class="noti-details">
                                                    <span class="noti-title">Rezaul Karim</span> added new
                                                    task
                                                    <span class="noti-title">Message for add New Product</span>
                                                </p>
                                                <p class="noti-time">
                                                    <span class="notification-time">4 mins ago</span>
                                                </p>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="topnav-dropdown-footer">
                            <a href="#">View all Notifications</a>
                        </div>
                    </div>
                </li>

                <li class="nav-item dropdown has-arrow main-drop">
                    @if (User.Identity!.IsAuthenticated)
                    {
                        <a href="javascript:void(0);" class="dropdown-toggle nav-link userset" data-bs-toggle="dropdown">
                            <i data-feather="user" class="user-icon"></i>
                        </a>
                        <div class="dropdown-menu menu-drop-user">
                            <div class="profilename">
                                <div class="profileset">
                                    <i data-feather="user" class="user-icon"></i>
                                    <div class="profilesets">
                                        <h6>@User.Identity.Name</h6>
                                        <h5>@User.FindFirstValue(ClaimTypes.Role)</h5>
                                    </div>
                                </div>
                                <hr class="m-0" />
                                <a class="dropdown-item" href="#">
                                    <i class="me-2" data-feather="user"></i> My Profile
                                </a>
                                <a asp-controller="Auth" asp-action="ResetPassword" class="dropdown-item">
                                    <i class="me-2"
                                       data-feather="settings"></i>Reset Password
                                </a>
                                <hr class="m-0" />
                                <a class="dropdown-item logout pb-0" asp-controller="Auth" asp-action="Logout">
                                    <img src="~/assets/img/icons/log-out.svg" class="me-2" alt="img" />Logout
                                </a>
                            </div>
                        </div>
                    }
                </li>
            </ul>

            <div class="dropdown mobile-user-menu">
                <a href="javascript:void(0);" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"
                   aria-expanded="false">
                    <i class="fa fa-ellipsis-v"></i>
                </a>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="#">My Profile</a>
                    <a class="dropdown-item" href="#">Settings</a>
                    <a class="dropdown-item" asp-controller="Auth" asp-action="Logout">Logout</a>
                </div>
            </div>
        </div>

        <div class="sidebar" id="sidebar">
            <div class="sidebar-inner slimscroll">
                <div id="sidebar-menu" class="sidebar-menu">
                    <ul>
                        <li>
                            <a asp-controller="Home" asp-action="Dashboard">
                                <img src="~/assets/img/icons/dashboard.svg" alt="img" />
                                <span>
                                    Dashboard
                                </span>
                            </a>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <img src="~/assets/img/icons/settings.svg" alt="img" />
                                <span>
                                    Settings
                                </span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li>
                                    <a asp-controller="Companies" asp-action="Index">Company Settings</a>
                                </li>
                                <li>
                                    <a asp-controller="Branch" asp-action="Index">Add Branch</a>
                                </li>
                                <li>
                                    <a asp-controller="AddUser" asp-action="Index">Add User</a>
                                </li>
                                <li>
                                    <a asp-controller="Department" asp-action="Index">Department</a>
                                </li>
                                <li>
                                    <a asp-controller="Designation" asp-action="Index">Designation</a>
                                </li>
                                <li>
                                    <a asp-controller="Employee" asp-action="Index">Employee</a>
                                </li>
                                <li>
                                    <a asp-controller="Employee" asp-action="GetEmployee">Employee List</a>
                                </li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <img src="~/assets/img/icons/settings.svg" alt="img" />
                                <span>
                                    Loan Management
                                </span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li>
                                    <a asp-controller="LoanApplication" asp-action="Index">Loan Application</a>
                                </li>
                                <li>
                                    <a asp-controller="RecommendLoanApplication" asp-action="Index">Recommend Loan Application</a>
                                </li>
                                <li>
                                    <a asp-controller="LoanApproval" asp-action="Index">Loan Approval</a>
                                </li>
                                <li>
                                    <a asp-controller="EmployeeLoan" asp-action="Index">Employee Loan Issue</a>
                                </li>
                                <li>
                                    <a asp-controller="ShowInstalmentList" asp-action="Index">Instalment List</a>
                                </li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <img src="~/assets/img/icons/settings.svg" alt="img" />
                                <span>
                                    Joining Formalities
                                </span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li>
                                    <a asp-controller="JoiningFormalities" asp-action="JoiningFormalities">Entry Joining Formalities</a>
                                </li>
                                <li>
                                    <a asp-controller="EmployeeJoiningFormalities" asp-action="Index">Joining Formalities</a>
                                </li>
                            </ul>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <img src="~/assets/img/icons/settings.svg" alt="img" />
                                <span>
                                    Hr Policy
                                </span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li>
                                    <a asp-controller="DutySlot" asp-action="Index">Create Duty Slot</a>
                                </li>
                                <li>
                                    <a asp-controller="LeaveType" asp-action="Index">Create Leave Type</a>
                                </li>
                                <li>
                                    <a asp-controller="LeaveAllotment" asp-action="Index">Leave Calculation Logic</a>
                                </li>
                                <li>
                                    <a asp-controller="LateAttendance" asp-action="Index">Late/Early Login/Logout Punishment</a>
                                </li>
                                <li>
                                    <a asp-controller="OffDays" asp-action="Index">Weekly Off day</a>
                                </li>
                                <li>
                                    <a asp-controller="HolidayCalendar" asp-action="Index">Holiday Calendar</a>
                                </li>
                                <li>
                                    <a asp-controller="SalaryHeads" asp-action="Index">Salary Heads</a>
                                </li>
                                <li>
                                    <a asp-controller="Salary" asp-action="Index">Salary</a>
                                </li>
                                <li>
                                    <a asp-controller="Overtime" asp-action="Index">Overtime Calculation</a>
                                </li>
                                <li>
                                    <a asp-controller="BonusCalculate" asp-action="Index">Bonus Create</a>
                                </li>
                                <li>
                                    <a asp-controller="BonusCalculate" asp-action="GetData">Bonus List</a>
                                </li>
                                <li>
                                    <a asp-controller="BonusCalculate" asp-action="ShowData">Report</a>
                                </li>
                            </ul>
                        </li>
                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <img src="~/assets/img/icons/settings.svg" alt="img" />
                                <span>
                                    Payroll
                                </span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li>
                                    <a asp-controller="Attendance" asp-action="Index">Attendance</a>
                                </li>
                            </ul>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <div class="page-wrapper pagehead">
            <div class="content">
                @RenderBody()
            </div>
        </div>
    </div>


    <script src="~/assets/js/jquery-3.6.0.min.js"></script>
    <script src="~/assets/js/feather.min.js"></script>
    <script src="~/assets/js/jquery.slimscroll.min.js"></script>
    <script src="~/assets/js/jquery.dataTables.min.js"></script>
    <script src="~/assets/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/assets/plugins/select2/js/select2.min.js"></script>
    <script src="~/assets/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/plugins/apexchart/chart-data.js"></script>
    <script src="~/assets/plugins/apexchart/apexcharts.min.js"></script>
    <script src="~/assets/plugins/sweetalert/sweetalert2.all.min.js"></script>
    <script src="~/assets/plugins/sweetalert/sweetalerts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="~/assets/js/script.js"></script>
    <script src="~/js/toastr.min.js"></script>
    <script src="~/dist/jstree.min.js"></script>


    <script>
            $(document).ready(function () {
                    $('.select2').select2({
                           // placeholder: 'Select an option',
                        allowClear: true,
                        width: '100%'
                    });
                });
                       flatpickr("#datePicker", {
                    dateFormat: "Y-m-d",
                    allowInput: true
            });
        $(document).ready(function () {
            // SweetAlert Success
            @if (TempData["SuccessMessageSweet"] != null)
            {
                    var message = System.Web.HttpUtility.JavaScriptStringEncode(TempData["SuccessMessageSweet"]?.ToString() ?? "");
                    <text>
                        Swal.fire({
                            icon: 'success',
                            title: 'Success',
                            text: '@message',
                            confirmButtonText: 'OK'
                        });
                    </text>
            }

            // SweetAlert Error
            @if (TempData["ErrorMessageSweet"] != null)
            {
                    var message = System.Web.HttpUtility.JavaScriptStringEncode(TempData["ErrorMessageSweet"]?.ToString() ?? "");
                    <text>
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: '@message',
                            confirmButtonText: 'OK'
                        });
                    </text>
            }

            // Toastr Success
            @if (TempData["SuccessMessage"] != null)
            {
                    var message = System.Web.HttpUtility.JavaScriptStringEncode(TempData["SuccessMessage"]?.ToString() ?? "");
                    <text>toastr.success('@message');</text>
            }

            // Toastr Error
            @if (TempData["ErrorMessage"] != null)
            {
                    var message = System.Web.HttpUtility.JavaScriptStringEncode(TempData["ErrorMessage"]?.ToString() ?? "");
                    <text>toastr.error('@message');</text>
            }
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
